{"ast":null,"code":"import _classCallCheck from \"/Users/dr.mac/projectRailway/railway-reservation-system-master/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dr.mac/projectRailway/railway-reservation-system-master/web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dr.mac/projectRailway/railway-reservation-system-master/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dr.mac/projectRailway/railway-reservation-system-master/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dr.mac/projectRailway/railway-reservation-system-master/web/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dr.mac/projectRailway/railway-reservation-system-master/web/src/components/Home.js\";\nimport React, { Component } from 'react';\nimport { routes, route, trainsByRoute, classes, schedules } from '../Services';\nimport { Button, Form, Col, Row, Table } from 'react-bootstrap';\nimport Select from 'react-select';\nimport DatePicker from \"react-datepicker\";\nimport moment from 'moment';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n    _this.state = {\n      fromOptions: [],\n      toOptions: [],\n      trains: [],\n      errMsg: 'Please fill all the fields!!!',\n      showErr: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var options = [];\n      routes().then(function (res) {\n        res.map(function (item, i) {\n          return item.route.map(function (station, i) {\n            return options.push({\n              value: station.name,\n              label: station.name,\n              route: item._id,\n              id: i,\n              fair: station.fair\n            });\n          });\n        });\n\n        _this2.setState({\n          fromOptions: options\n        });\n      }).catch(function (err) {\n        console.log(err);\n      }); //        classes()\n      //            .then(res => {\n      //                var classes = []\n      //                res.map((trainClass, i) => {\n      //                    return classes.push({ value: trainClass.name, label: trainClass.name, id: trainClass._id, fairRatio: trainClass.fairRatio })\n      //                })\n      //                this.setState({ classes: classes })\n      //            })\n      //            .catch(err => {\n      //                console.log(err)\n      //            })\n      //        schedules()\n      //            .then(res => {\n      //                var schedules = []\n      //                res.map((schedule, i) => {\n      //                    return schedules.push({ value: schedule.time, label: schedule.time, id: schedule._id })\n      //                })\n      //                this.setState({ schedules: schedules })\n      //            })\n      //            .catch(err => {\n      //                console.log(err)\n      //            })\n      //\n      //    }\n      //\n      //    handleChange = type => selectedOption => {\n      //        this.setState({ [type]: selectedOption }, () => {\n      //            this.calculateFair()\n      //        });\n      //        if (type === 'from') {\n      //            this.setState({ to: '', train: '' })\n      //            route(selectedOption.route)\n      //                .then(res => {\n      //                    var options = [];\n      //                    res.route.map((station, i) => {\n      //                        return options.push({ value: station.name, label: station.name, route: res._id, id: i, fair: station.fair })\n      //                    })\n      //                    this.setState({ toOptions: options })\n      //                })\n      //                .catch(err => {\n      //                    console.log(err)\n      //                })\n      //            trainsByRoute(selectedOption.route)\n      //                .then(res => {\n      //                    var options = [];\n      //                    res.map((train, i) => {\n      //                        return options.push({ value: train.name, label: train.name, id: train._id })\n      //                    })\n      //                    this.setState({ trains: options })\n      //                })\n      //                .catch(err => {\n      //                    console.log(err)\n      //                })\n      //        }\n      //    }\n      //\n      //    handleQtyChange = () => event => {\n      //        this.setState({ qty: event.target.value }, () => this.calculateFair())\n      //    }\n      //\n      //    calculateFair = () => {\n      //        var user = localStorage.getItem('user')\n      //        if (user) {\n      //            user = JSON.parse(user)\n      //        }\n      //        if (this.state.to && this.state.from && this.state.trainClass && this.state.qty) {\n      //            var amount = Math.abs(this.state.to.fair - this.state.from.fair) * this.state.trainClass.fairRatio * this.state.qty\n      //            amount = amount.toFixed(2)\n      //            var discount = (user && user.discount ? 0.1 * amount : 0).toFixed(2)\n      //            var total = (amount - discount).toFixed(2)\n      //            this.setState({ amount: amount, discount: discount, total: total })\n      //        }\n      //    }\n      //\n      //    handleSubmit = event => {\n      //        this.setState({ showErr: false })\n      //        const state = this.state\n      //        var user = localStorage.getItem('user')\n      //        if (!user) {\n      //            alert(\"Please Sign In Before Make a Reservation!!!\")\n      //            this.props.history.push('/')\n      //        } else if (state.from && state.to && state.train && state.trainClass && state.time && state.qty && state.date) {\n      //            this.props.history.push(\"/payment\", { ...this.state })\n      //        } else {\n      //            this.setState({ showErr: true })\n      //        }\n      //        event.preventDefault()\n      //        event.stopPropagation()\n      //\n      //    }\n      //\n      //    handleDateChange = dt => {\n      //        const date = moment(dt).format('YYYY-MM-DD')\n      //        this.setState({ date: date })\n      //    }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(Form, {\n        style: {\n          padding: 20\n        },\n        onSubmit: function onSubmit(e) {\n          return _this3.handleSubmit(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Row, {\n        style: {\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        style: {\n          width: '75%',\n          borderBottom: '1px solid rgb(200,200,200)',\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Book Train Tickets\")), React.createElement(Form.Row, {\n        style: {\n          width: '75%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"from\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"From\"), React.createElement(Select, {\n        options: this.state.fromOptions,\n        onChange: this.handleChange(\"from\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"to\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"To\"), React.createElement(Select, {\n        options: this.state.toOptions,\n        onChange: this.handleChange(\"to\"),\n        value: this.state.to,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        style: {\n          width: '75%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"from\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Train\"), React.createElement(Select, {\n        options: this.state.trains,\n        onChange: this.handleChange(\"train\"),\n        value: this.state.train,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"to\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Class\"), React.createElement(Select, {\n        options: this.state.classes,\n        onChange: this.handleChange(\"trainClass\"),\n        value: this.state.trainClass,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        style: {\n          width: '75%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"from\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Time\"), React.createElement(Select, {\n        options: this.state.schedules,\n        onChange: this.handleChange(\"time\"),\n        value: this.state.time,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"No of Tickets\"), React.createElement(Form.Control, {\n        placeholder: \"qty\",\n        onChange: this.handleQtyChange(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        style: {\n          width: '75%',\n          paddingBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 6,\n        lg: 6,\n        xl: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Date\"), React.createElement(DatePicker, {\n        className: \"form-control\",\n        onChange: this.handleDateChange,\n        minDate: new Date(),\n        value: this.state.date,\n        placeholderText: \"YYYY-MM-DD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        style: {\n          width: '75%',\n          paddingLeft: 5,\n          align: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, this.state.amount && React.createElement(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Amount\"), React.createElement(\"td\", {\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, this.state.amount, \" LKR\")), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Discount\"), React.createElement(\"td\", {\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, this.state.discount, \" LKR\")), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Total\"), React.createElement(\"td\", {\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, this.state.total, \" LKR\"))))), React.createElement(Form.Row, {\n        style: {\n          width: '75%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, this.state.showErr && React.createElement(\"p\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.state.errMsg)), React.createElement(Form.Row, {\n        style: {\n          width: '75%',\n          padding: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Make Reservation\"))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/dr.mac/projectRailway/railway-reservation-system-master/web/src/components/Home.js"],"names":["React","Component","routes","route","trainsByRoute","classes","schedules","Button","Form","Col","Row","Table","Select","DatePicker","moment","Home","props","state","fromOptions","toOptions","trains","errMsg","showErr","options","then","res","map","item","i","station","push","value","name","label","_id","id","fair","setState","catch","err","console","log","padding","e","handleSubmit","alignItems","justifyContent","width","borderBottom","marginBottom","handleChange","to","train","trainClass","time","handleQtyChange","paddingBottom","handleDateChange","Date","date","paddingLeft","align","amount","discount","total","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { routes, route, trainsByRoute, classes, schedules } from '../Services'\n\nimport { Button, Form, Col, Row, Table } from 'react-bootstrap'\nimport Select from 'react-select'\nimport DatePicker from \"react-datepicker\"\nimport moment from 'moment'\n\nclass Home extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            fromOptions: [],\n            toOptions: [],\n            trains: [],\n            errMsg: 'Please fill all the fields!!!',\n            showErr: false,\n        };\n    }\n\n    componentDidMount() {\n        var options = []\n        routes()\n            .then(res => {\n                 res.map((item, i) => {\n                    return item.route.map((station, i) => {\n                        return options.push({ value: station.name, label: station.name, route: item._id, id: i, fair: station.fair })\n                    })\n                })\n                this.setState({ fromOptions: options })\n            })\n            .catch(err => {\n                console.log(err)\n            })\n\n//        classes()\n//            .then(res => {\n//                var classes = []\n//                res.map((trainClass, i) => {\n//                    return classes.push({ value: trainClass.name, label: trainClass.name, id: trainClass._id, fairRatio: trainClass.fairRatio })\n//                })\n//                this.setState({ classes: classes })\n//            })\n//            .catch(err => {\n//                console.log(err)\n//            })\n//        schedules()\n//            .then(res => {\n//                var schedules = []\n//                res.map((schedule, i) => {\n//                    return schedules.push({ value: schedule.time, label: schedule.time, id: schedule._id })\n//                })\n//                this.setState({ schedules: schedules })\n//            })\n//            .catch(err => {\n//                console.log(err)\n//            })\n//\n//    }\n//\n//    handleChange = type => selectedOption => {\n//        this.setState({ [type]: selectedOption }, () => {\n//            this.calculateFair()\n//        });\n//        if (type === 'from') {\n//            this.setState({ to: '', train: '' })\n//            route(selectedOption.route)\n//                .then(res => {\n//                    var options = [];\n//                    res.route.map((station, i) => {\n//                        return options.push({ value: station.name, label: station.name, route: res._id, id: i, fair: station.fair })\n//                    })\n//                    this.setState({ toOptions: options })\n//                })\n//                .catch(err => {\n//                    console.log(err)\n//                })\n//            trainsByRoute(selectedOption.route)\n//                .then(res => {\n//                    var options = [];\n//                    res.map((train, i) => {\n//                        return options.push({ value: train.name, label: train.name, id: train._id })\n//                    })\n//                    this.setState({ trains: options })\n//                })\n//                .catch(err => {\n//                    console.log(err)\n//                })\n//        }\n//    }\n//\n//    handleQtyChange = () => event => {\n//        this.setState({ qty: event.target.value }, () => this.calculateFair())\n//    }\n//\n//    calculateFair = () => {\n//        var user = localStorage.getItem('user')\n//        if (user) {\n//            user = JSON.parse(user)\n//        }\n//        if (this.state.to && this.state.from && this.state.trainClass && this.state.qty) {\n//            var amount = Math.abs(this.state.to.fair - this.state.from.fair) * this.state.trainClass.fairRatio * this.state.qty\n//            amount = amount.toFixed(2)\n//            var discount = (user && user.discount ? 0.1 * amount : 0).toFixed(2)\n//            var total = (amount - discount).toFixed(2)\n//            this.setState({ amount: amount, discount: discount, total: total })\n//        }\n//    }\n//\n//    handleSubmit = event => {\n//        this.setState({ showErr: false })\n//        const state = this.state\n//        var user = localStorage.getItem('user')\n//        if (!user) {\n//            alert(\"Please Sign In Before Make a Reservation!!!\")\n//            this.props.history.push('/')\n//        } else if (state.from && state.to && state.train && state.trainClass && state.time && state.qty && state.date) {\n//            this.props.history.push(\"/payment\", { ...this.state })\n//        } else {\n//            this.setState({ showErr: true })\n//        }\n//        event.preventDefault()\n//        event.stopPropagation()\n//\n//    }\n//\n//    handleDateChange = dt => {\n//        const date = moment(dt).format('YYYY-MM-DD')\n//        this.setState({ date: date })\n//    }\n}\n    render() {\n        return (\n            <Form style={{ padding: 20 }} onSubmit={(e) => this.handleSubmit(e)}>\n                <Row style={{ alignItems: 'center', justifyContent: 'center' }}>\n                    <Form.Row style={{ width: '75%', borderBottom: '1px solid rgb(200,200,200)', marginBottom: 20 }}>\n                        <h4>Book Train Tickets</h4>\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%' }}>\n                        <Form.Group as={Col} controlId=\"from\">\n                            <Form.Label>From</Form.Label>\n                            <Select options={this.state.fromOptions} onChange={this.handleChange(\"from\")} />\n                        </Form.Group>\n                        <Form.Group as={Col} controlId=\"to\">\n                            <Form.Label>To</Form.Label>\n                            <Select options={this.state.toOptions} onChange={this.handleChange(\"to\")} value={this.state.to} />\n                        </Form.Group>\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%' }}>\n                        <Form.Group as={Col} controlId=\"from\">\n                            <Form.Label>Train</Form.Label>\n                            <Select options={this.state.trains} onChange={this.handleChange(\"train\")} value={this.state.train} />\n                        </Form.Group>\n                        <Form.Group as={Col} controlId=\"to\">\n                            <Form.Label>Class</Form.Label>\n                            <Select options={this.state.classes} onChange={this.handleChange(\"trainClass\")} value={this.state.trainClass} />\n                        </Form.Group>\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%' }}>\n                        <Form.Group as={Col} controlId=\"from\">\n                            <Form.Label>Time</Form.Label>\n                            <Select options={this.state.schedules} onChange={this.handleChange(\"time\")} value={this.state.time} />\n                           </Form.Group>\n                        <Form.Group as={Col} controlId=\"formGridEmail\">\n                            <Form.Label>No of Tickets</Form.Label>\n                            <Form.Control placeholder=\"qty\" onChange={this.handleQtyChange()} />\n                        </Form.Group>\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%', paddingBottom: 20 }}>\n                        <Col md={6} lg={6} xl={6}>\n                            <Form.Label>Date</Form.Label>\n                            <DatePicker\n                                className=\"form-control\"\n                                onChange={this.handleDateChange}\n                                minDate={new Date()}\n                                value={this.state.date}\n                                placeholderText=\"YYYY-MM-DD\"\n                            />\n                        </Col>\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%', paddingLeft: 5, align: 'right' }}>\n                        {this.state.amount &&\n                            <Table striped bordered hover size=\"sm\">\n                                <tbody>\n                                    <tr>\n                                        <td align='right'>Amount</td>\n                                        <td align='right'>{this.state.amount} LKR</td>\n                                    </tr>\n                                    <tr>\n                                        <td align='right'>Discount</td>\n                                        <td align='right'>{this.state.discount} LKR</td>\n                                    </tr>\n                                    <tr>\n                                        <td align='right'>Total</td>\n                                        <td align='right'>{this.state.total} LKR</td>\n                                    </tr>\n                                </tbody>\n                            </Table>\n                        }\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%' }}>\n                        {this.state.showErr && <p style={{ color: 'red' }}>{this.state.errMsg}</p>}\n                    </Form.Row>\n                    <Form.Row style={{ width: '75%', padding: 5 }}>\n                        <Button variant=\"primary\" type=\"submit\">\n                            Make Reservation\n                        </Button>\n                    </Form.Row>\n                </Row>\n            </Form >\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}